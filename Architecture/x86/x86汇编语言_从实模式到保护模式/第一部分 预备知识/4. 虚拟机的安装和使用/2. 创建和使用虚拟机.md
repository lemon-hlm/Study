使用Oracle VM VirtualBox，虚拟硬盘使用固定尺寸的 VHD。

VHD 规范最早起源于Connectix 公司的虚拟机软件 Connectix Virtual PC，2003 年，微软公司收购了它并改名为 Microsoft Virtual PC。2006 年，微软公司正式发布了 VHD 虚拟硬盘格式规范。

## 2.5 虚拟硬盘简介

采用固定尺寸的VHD虚拟硬盘，因为其简单性。它仅包含两部分，前面是数据区，用来模拟实际的硬盘空间，后面跟一个512字节的结尾。（2004年前规范是511字节）

要访问硬盘，运行中的程序必须至少向硬盘控制器提供4个参数，分别是磁头号、磁道号、扇区号，以及访问意图（读还是写）。

磁盘读写以扇区为最小单位。所以读写数据，至少是1个扇区。

再VHD规范中，每个扇区是512字节。VHD文件一开始的512字节，就对应着物理硬盘的0面0道1扇区。然后，VHD文件的第二个512字节，对应着0面0道2扇区，后面的依次类推，一直对应到 0 面 0 道 n 扇区。这里，n 等于每磁道的扇区数。

再往后，因为硬盘的访问是按柱面进行的，所以，在VHD文件中，紧接着前面的数据块，下一个数据块对应的是1面0道1扇区，就这样一直往后排列，当把第一个柱面全部对应完后，再从第二个柱面开始对应。

如图 4-16 所示，为了标志一个文件是VHD格式的虚拟硬盘，并为使用它的虚拟机提供该硬盘的参数，在 VHD 文件的结尾，包含了512字节的格式信息。Windows下查看可以使用HexView。

如图 4-16 所示，文件尾信息是以一个字符串“conectix”开始的。这个标志用来告诉试图打开它的虚拟机，这的确是一个合法的VHD文件。该标志称为VHD创建者标识，就是说，该公司（conectix）创建了 VHD 文件格式的最初标准。

![config](images/3.png)

从这个标志开始，后面的数据包含了诸如文件的创建日期、VHD的版本、创建该文件的应用程序名称和版本、创建该文件的应用程序所属的操作系统、该虚拟硬盘的参数（磁头数、每面磁道数、每磁道扇区数）、VHD类型（固定尺寸还是动态增长）、虚拟硬盘容量等。