
<!-- @import "[TOC]" {cmd="toc" depthFrom=1 depthTo=6 orderedList=false} -->

<!-- code_chunk_output -->

* [1 物理内存条](#1-物理内存条)
* [2 DRAM原理](#2-dram原理)
* [参考](#参考)

<!-- /code_chunk_output -->

# 1 物理内存条

我们平时看到内存条，有的上面单面有8个内存颗粒：

![](./images/2019-04-18-21-41-17.png)

上图就是1R X 8 DIMM

有的则有16个内存颗粒：

![](./images/2019-04-18-21-43-01.png)

上图就是2R X 4 DIMM；多出来几个颗粒是ECC校验用

甚至还有单面32个颗粒的超高怪物：

![](./images/2019-04-18-21-43-39.png)

上图就是4R X 4 DIMM.

另一篇文章讨论了服务器能够支持的内存最大容量. 

得出了结论：**最大内存**是由能够**插多少条内存**决定的，因为**每根内存条**现在**最大128GB(傲腾内存已经超过512GB了**)，**整体内存容量**就**被限制**了下来，这不是钱多钱少的问题。

是不是可以通过不停增加颗粒数目来堆出超高内存容量的内存条呢？答案当然是否定的了。今天我们就一起来探讨一下问什么。

首先我们假定不考虑内存颗粒能不能做出这么大的容量，仅仅理论探讨。限于篇幅，为了简化讨论范围，我们给问题设置了一些限制：

1. **仅讨论DDR4**，包括**UDIMM DDR4**和**RDIMM DDR4**。DDR3因为本身支持的容量就小而且基本已被淘汰，我们就不必哀悼它了。DDR5目前还没有上市，我们等它成熟后再来重新回顾它的理论极限。LRDIMM会有些许顾及，担不是重点。

2. 讨论基于**DDR内存的标准**：**JEDEC标准**。

**内存条的容量**和它的**基本单位**：**内存颗粒**的**组织方式**息息相关。如果我们仔细看上面那三种内存条和注解，你能不能发现一些规律呢？细心的同学也许发现了：

- **越大的内存容量**，**nR**中的**n就越大**；
- 与此相反，**越大的内存容量**，X n中的**n反而越小**。

这是为什么呢？我们需要从DRAM的原理讲起。

# 2 DRAM原理

内存DRAM的每个单元可以看作一个晶体管和一个电容的组合：

![](./images/2019-04-18-21-59-59.png)

电容负责存储，充过电时是1，没充过电是0，这就是内存是如何存储数据的。晶体管是个开关，用于选中该电容。Word line被选中，晶体管导通，电容的就和bit line导通，可以读出0和1。正是因为内存每个单元如此简单，才能如此大规模组织起来，形成低价而密度很高的内存颗粒。

这种方式设计简单，但是在充放电时电压和电荷管理有很多麻烦。所以引入了Sense Amplifier。单元就变成了这样：


# 参考

- 本文章参考: 微信公众账号UEFIBlog, [点此进入文章](https://mp.weixin.qq.com/s?__biz=MzI2NDYwMDAxOQ==&mid=2247484244&idx=1&sn=71930d3c6e90b0da0ecd8f77f9e339ee&chksm=eaab63e8dddceafe99acb4c78eeb9988a1898a208fbd92e12c0148cb9bfbb68ffa2558b2cbdc&mpshare=1&scene=1&srcid=#rd)