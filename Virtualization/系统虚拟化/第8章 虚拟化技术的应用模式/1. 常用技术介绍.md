
<!-- @import "[TOC]" {cmd="toc" depthFrom=1 depthTo=6 orderedList=false} -->

<!-- code_chunk_output -->

* [1 虚拟机的动态迁移](#1-虚拟机的动态迁移)
	* [1.1 什么是虚拟机的动态迁移](#11-什么是虚拟机的动态迁移)
	* [1.2 虚拟机动态迁移的特点](#12-虚拟机动态迁移的特点)

<!-- /code_chunk_output -->

# 1 虚拟机的动态迁移

## 1.1 什么是虚拟机的动态迁移

**迁移**, 分为**系统的迁移**和**工作的迁移**. 

- **系统迁移**是指把**整个系统的软件**, 包括**操作系统**, 完全复制到另一个机器上;

- **工作迁移**是指把某台机器上的**一些工作转移到别的机器**上

先看看**传统的无虚拟机**和**有虚拟机的静态迁移**是什么样子的. 

**无虚拟机**下的**系统迁移**是指在没有虚拟机的环境下把一台机器的所有软件, 包括所有状态都复制到另一台机器上. 这种迁移可以通过先做出**系统镜像**, 然后**复制**到其他机器上, 或通过硬盘互相复制的方式来实现迁移.

**无虚拟机**的**工作迁移**则需要**特殊的系统支持**, 如哥伦比亚大学的Zap系统, 通过在操作系统上实现一层薄的虚拟层, 实现工作的**实时迁移**. 

虚拟机的静态迁移指在关闭虚拟机的情况下, 使用文件传输软件将虚拟机的镜像传输到另外的机器上, 然后启动虚拟机. 此种情况下, 不能实现工作的迁移.

最后看看有虚拟机的动态迁移, 所谓虚拟机的**动态迁移**, 是指在**虚拟机运行**的情况下, **实时将虚拟机1迁移到另一个虚拟机2**. 具体讲, 就是将**物理服务器A**上的**内存**里的**所有关于虚拟机1的信息**全部**封包通过网络移交到物理服务器B**上, 从而**形成新的虚拟机2**. 这是一个内存信息的移交与转换的过程, 速度快, 其唯一限制就是网络带宽与突然停电之类的突发情况. 这种模式下, 如果**VMM只把某些工作的信息**传送给**其它虚拟机**中, 则可以实现**工作的实时迁移**.

## 1.2 虚拟机动态迁移的特点

虚拟机的动态迁移具有如下优点

⓵ 在**非停机情况**下进行**迁移**, 可实现**在线的系统维护**, 提高系统的**可维护性**, 优化系统中的**资源分配**, 以及通过将**不正常工作的宿主机**的工作迁移到**正常工作的宿主机**中实现**高可用性**

⓶ 前面提到, 虚拟化去掉了硬件的相关性, 从而实现不同硬件上的虚拟机之间的动态迁移, 极大扩大了可迁移的面, 使虚拟机的动态迁移在实用性方面较之以前的方法有很大进步.

⓷ 虚拟机tong'chagn'jiang