
<!-- @import "[TOC]" {cmd="toc" depthFrom=1 depthTo=6 orderedList=false} -->

<!-- code_chunk_output -->

* [1 虚拟机的动态迁移](#1-虚拟机的动态迁移)
	* [1.1 什么是虚拟机的动态迁移](#11-什么是虚拟机的动态迁移)

<!-- /code_chunk_output -->

# 1 虚拟机的动态迁移

## 1.1 什么是虚拟机的动态迁移

**迁移**, 分为**系统的迁移**和**工作的迁移**. 

- **系统迁移**是指把**整个系统的软件**, 包括**操作系统**, 完全复制到另一个机器上;

- **工作迁移**是指把某台机器上的**一些工作转移到别的机器**上

先看看传统的无虚拟机和有虚拟机的静态迁移是什么样子的. 

无虚拟机下的系统迁移是指在没有虚拟机的环境下把一台机器的所有软件, 包括所有状态都复制到另一台机器上. 这种迁移可以通过先做出系统镜像, 然后复制到其他机器上, 或通过硬盘互相复制的方式来实现迁移.

无虚拟机的工作迁移则需要特殊的系统支持, 如哥伦比亚大学的Zap系统, 通过在操作系统上实现一层薄的虚拟层, 实现工作的实时迁移. 

虚拟机的静态迁移指在关闭虚拟机的情况下, 使用文件传输软件将虚拟机的镜像传输到另外的机器上, 然后启动虚拟机. 此种情况下, 不能实现工作的迁移.

最后看看有虚拟机的动态迁移, 所谓虚拟机的动态迁移, 是指在虚拟机运行的情况下, 实时将虚拟机1迁移到另一个虚拟机2. 具体讲, 就是将物理服务器A上的虚拟机1内的内存里的所有关于虚拟机1的信息全部封包通过网络移交到物理服务器B上, 从而形成新的虚拟机2. 这是一个内存信息的移交与转换的过程, 速度快, 其唯一限制就是网络带宽与突然停电之类的突发情况. 这种模式下, 如果VMM只把某些工作的信息传送给其它虚拟机中, 则可以实现工作的实时迁移.

