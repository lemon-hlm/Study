
<!-- @import "[TOC]" {cmd="toc" depthFrom=1 depthTo=6 orderedList=false} -->

<!-- code_chunk_output -->

* [1 可用性含义](#1-可用性含义)
* [2 虚拟机技术如何提高可用性](#2-虚拟机技术如何提高可用性)
* [3 虚拟机技术带来的新契机](#3-虚拟机技术带来的新契机)

<!-- /code_chunk_output -->

# 1 可用性含义

传统可用性包括易用性和实用性两个方面, 易用性即衡量使用一种产品来执行指定任务的难易程度的尺度, 实用性则包括功能的有用性和多样性. 一个产品, 功能越多, 并且这些功能会被使用, 则实用性就越高. 

计算机领域, 我们所谈的可用性是指通过尽量缩短因日常维护(计划)或突发系统崩溃(非计划)所导致的停机, 使系统不间断地向外界提供服务, 其理想状态是零停机, 即没停机时间.

# 2 虚拟机技术如何提高可用性

系统停机两种情况:

- 第一种是软件出错. 客观存在且必然存在, 并且在可预见的未来这种出错是不可避免. 

- 第二种是硬件出错. 客观存在且不可避免.

传统高可用性方案致力于在系统发生不可避免停机时, 能在最短的时间内实现服务的恢复. 为达到这个目标, 其IT基础构造需要保证每一台计算机必须有一台镜像, 使用群集软件将计算机设置为互相镜像. 一般情况下, 由主虚拟机向镜像发送心跳信号, 当主虚拟机发生故障, 镜像接收不到心跳信号时, 将由镜像接管主虚拟机工作. 这种方法确实可以保证系统崩溃时的快速恢复, 而且此方法在硬件出错和软件出错时同样有效. 

但这个方法有显而易见的缺点, 每个计算机都需要一个镜像, 对资源的极大浪费, 而且镜像管理将会大量人力, 即此方法是资源密集型和劳动密集型的. 而且此方法要求镜像机和主虚拟机在硬件配置上完全一样, 故只有少数公司在实际生产中使用这种方法.

# 3 虚拟机技术带来的新契机

利用虚拟机技术, 可以将多个物理资源抽象成和硬件无关的虚拟资源, 而硬件资源则像放在池子中的物件一样, 由VMM分配虚拟资源, 也称共享资源池. 

虚拟机则运行在这些虚拟资源上, VMM动态监控虚拟机内部的OS和应用的运行状态, 如果崩溃, 则在相应服务节点重启虚拟机, 从而实现**软件出错**的快速恢复能力. 

同时, VMM会动态监测物理节点的可用性, 如果某个物理节点失效, 则在另外可用的物理节点上重新启动所有受到此物理节点影响的虚拟机, 从而实现**硬件出错**的快速恢复能力.

