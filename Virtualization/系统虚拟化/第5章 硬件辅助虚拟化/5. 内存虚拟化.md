# 1 概述

内存虚拟化的主要任务是实现地址空间的虚拟化, **内存虚拟化**通过**两次地址转换**来支持地址空间的虚拟机, 即**客户机虚拟地址GVA**→**客户机物理地址GPA**→**宿主机物理地址HPA**的转换. 

其中, **GVA→GPA**的转换是由**客户机软件决定**, 通常是**客户机OS**通过VMCS中客户机状态域CR3指向的页表来指定; GPA→HPA的转换是由VMM决定, VMM在将物理内存分配给客户机时就确定了GPA→HPA的转换是由VMM决定的, VMM在将物理内存分配给客户机时就确定了GPA→HPA的转换, VMM通常会用内部数据结构来记录这个关系.

