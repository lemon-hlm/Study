
<!-- @import "[TOC]" {cmd="toc" depthFrom=1 depthTo=6 orderedList=false} -->

<!-- code_chunk_output -->

* [1 性能指标](#1-性能指标)
	* [1.1 吞吐量(Throughput)](#11-吞吐量throughput)
	* [1.2 延迟(Latency)](#12-延迟latency)
	* [1.3 并发用户数(concurrent users)](#13-并发用户数concurrent-users)
	* [1.4 资源利用率(Utilization)](#14-资源利用率utilization)
	* [1.5 综合评价](#15-综合评价)

<!-- /code_chunk_output -->

# 1 性能指标

虚拟化性能测试包括的范围比较广泛, 可能包含对CPU、内存、网络、磁盘的性能测试, 可能包含对虚拟机动态迁移的性能测试, 也可能需要考虑多种物理平台上的性能测试, 还可能需要考虑很多个虚拟机运行在同一个宿主机上时的邢恩能够测试. 目前, 有一些针对各个虚拟化软件的性能分析工具(profiling), 也有一些衡量虚拟化系统中单个方面性能的基准测试工具(benchmark), 不过还没有一个能集成所有性能测试于一体的、比较权威的、专门针对虚拟化的性能测试工具. 由于虚拟化性能测试涉及计算机系统的方方面面, 而且没有一个标准化的测试工具, 因此, 虚拟化性能与测试分析也是具有挑战性的工程研究领域.

通常, 评价一个**系统的性能好坏**可以用**吞吐量(Throughput**)、**延迟(Latency**)、**并发用户数(concurrent users**)和**资源利用率(Utilization**)等几个方面来衡量.

这个指标**不仅仅针对于虚拟化！！！**

## 1.1 吞吐量(Throughput)

所谓吞吐量, 是指**单位时间**内**系统的处理能力**. 处理能力对于不同的评测目标, 可能含义不同. 

例如,

- 在评价一个**数据库系统**时, 所谓吞吐量可以是**单位时间**里交易完成的**个数**;

- 在评价一个**网络系统**时, 吞吐量可以是指**单位时间**里传输**字节数**等

## 1.2 延迟(Latency)

所谓延迟, 是指完成一个**指定任务**所**需要花费的时间**. 也可以被称为响应时间(response time)

例如,

- 在评价一个**数据库系统**时, 可以考察它完成一个**查询**, 或完成一个**数据处理**所需要的**时间**;

- 在评价一个**网络系统**时, 可以考察**发送一个网络包**所需要的时间

## 1.3 并发用户数(concurrent users)

同时使用的一个系统服务的用户数量. 对于一个系统, 能支持的并发用户数当然是越多越好.

## 1.4 资源利用率(Utilization)

所谓资源利用率, 是指完成一个任务所**需要花费的系统资源**. 例如完成一个数据处理所占用处理器的事件、占用内存的大小或占用网络带宽大小等。

## 1.5 综合评价

一般而言, **吞吐量越高**、**延迟越低**、**资源利用率越低**则表示系统的性能越好; 反之, 越差. 某些实际情况下, 这三项指标不会同时都朝性能好的方向发展. 这时, 需要统筹分析考虑, 综合评价性能好坏. 例如网络传送, 如果系统A的网络包传输延迟1ms, 但每次只能传送512字节, 系统B的网络包传输延迟是2ms, 但一次传送1536字节, 这种情况下, 系统A的延迟是1ms, 优于系统B的2ms. 但, 系统B的吞吐量是每秒768千字节, 优于系统A的吞吐量每秒512千字节. 除此以外, 如果系统B要额外使用处理器资源, 如20%的CPU时间, 而系统A只有10%, 这代表系统A在资源利用率方面要好于系统B.

系统中应用程序的数量和类型都非常多, 而且对系统的使用特点也各不相同, 有CPU密集型的(如科学计算), 有网络I/O密集型的(如web服务), 也有磁盘I/O密集型的(如数据库服务), 也有内存密集型的(如缓存服务). 功能类似的应用, 使用不同编程语言开发, 性能差别可能很大, 而且, 选择不同的中间件(middle ware)来部署同一套应用, 其性能也可能大不相同. 所以, 要想衡量KVM虚拟化的性能, 最直接的方法就是: 将准备实施虚拟化的系统中运行的应用程序迁移到KVM虚拟客户机中试运行, 如果性能良好且稳定, 则可以考虑真正实施该系统的虚拟化.

尽管系统中运行的**应用程序可能是数量繁多**，**种类**也千差万别，但是它们几乎都会使用**CPU**、**内存**、**网络**、**磁盘**等基本的子系统。

为综合评价一个**虚拟环境的性能**, 就要有不同的工具从不同角度考量它各方面的性能, 如**处理器**、**内存**、**网络**和**磁盘**等.