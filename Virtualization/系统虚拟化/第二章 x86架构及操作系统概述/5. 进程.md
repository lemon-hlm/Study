进程是各种资源的合集, 通常一个进程包含以下几种资源.

(1) **私有**的**线性地址空间**: 这是**进程可以使用的线性地址的总和**, 其中**内核部分**可能和其它进程是**共享**的.

(2) **可执行的程序**: 也就是**二进制序列**, 包含**代码和数据**.

(3) 一些已经获得的**其它资源**, 如**打开的文件**、**管道**等.

(4) **进程的权限**: 进程的**运行权限**, 例如Linux中有root用户和非root用户之分

(5) 进程的描述符: 有的操作系统成为控制块, 包含操作该进程的一些必要信息, 例如进程ID号

这里介绍和虚拟化技术最紧密的概念--上下文.

# 1 上下文

上下文就是程序(进程/中断)运行时所需要的寄存器的最小集合. 

下面看下x86下上下文包含的寄存器.

(1) 通用寄存器组: EAX、EBX、ECX、EDX、ESI、EDI这6个， 加上ESP(栈指针)、EBP(框架指针).

(2) 段相关寄存器组: CS、DS、SS, 如果程序使用了ES等额外段寄存器, 也要包含进来.

(3) 标志寄存器: 主要指EFLAGS寄存器.

(4) 程序指针寄存器: EIP

(5) GDT基地址: 用于访问GDT、GDTR中的内容

(6) LDT段选择符: 如果程序使用了私有的LDT, LDTR的内容

(7) IDT基地址: 用于访问IDT表, IDTR的内容

(8) 控制寄存器组: CR系列, 表示当前程序运行时的CPU控制状态

(9) 浮点相关寄存器组: 用于浮点计算的一些寄存器组

(10) 一些特殊用途的寄存器: 例如x86架构下的MSR(Model\-Specific 