
<!-- @import "[TOC]" {cmd="toc" depthFrom=1 depthTo=6 orderedList=false} -->

<!-- code_chunk_output -->

* [1 代码结构](#1-代码结构)
	* [1.1 开始执行](#11-开始执行)

<!-- /code_chunk_output -->

# 1 代码结构

如我们所知，QEMU是一个模拟器，它能够动态模拟**特定架构的CPU指令**，如X86，PPC，ARM等等。

**QEMU模拟的架构**叫**目标架构**，

**运行QEMU**的**系统架构**叫**主机架构**，

QEMU中有一个**模块**叫做**微型代码生成器（TCG**），它用来将**目标代码翻译成主机代码**。如下图所示。

![](./images/2019-06-04-16-25-48.png)

将**运行在虚拟cpu**上的代码叫做**客户机代码**

**QEMU**的**主要功能**就是**不断提取客户机代码**并且**转化成主机指定架构的代码**。

整个翻译任务分为**两个部分**：

- 第一个部分是将做**目标代码（TB**）转化成**TCG中间代码**，
- 然后再将**中间代码**转化成**主机代码**。

QEMU的代码结构非常清晰但是内容非常复杂，这里先简单分析一下总体的结构

## 1.1 开始执行

