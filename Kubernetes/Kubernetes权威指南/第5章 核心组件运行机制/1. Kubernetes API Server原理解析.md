
<!-- @import "[TOC]" {cmd="toc" depthFrom=1 depthTo=6 orderedList=false} -->

<!-- code_chunk_output -->

- [1 Kubernetes API Server概述](#1-kubernetes-api-server概述)

<!-- /code_chunk_output -->

总体来看，Kubernetes **API Server**的**核心功能**是提供Kubernetes**各类资源对象**（如Pod、RC、Service等）的增、删、改、查及Watch等**HTTP Rest接口**，成为集群内各个功能模块之间数据交互和通信的中心枢纽，是整个系统的**数据总线**和**数据中心**。

除此之外，它还有以下一些功能特性。

(1) 集群管理的API入口

(2) 资源配额控制的入口

(3) 提供了完备的集群安全机制

# 1 Kubernetes API Server概述

Kubernetes API Server通过一个名为**kube\-apiserver**的**进程**提供服务，该进程运行在**Master**上。

在**默认情况**下，kube\-apiserver进程在**本机的8080端口**（对应参数\-\-insecure\-port）提供REST服务。

可以同时**启动HTTPS安全端口**（\-\-secure\-port=6443）来启动安全机制，加强REST API访问的安全性。

通常可以通过**命令行工具kubectl**来与Kubernetes API Server交互，它们之间的接口是**RESTful API**。

为了测试和学习Kubernetes API Server所提供的接口，我们也可以使用**curl命令行工具**进行快速验证。

比如, 登录Master并运行下面的curl命令, 得到以JSON方式返回的Kubernetes API的版本信息

```
# curl localhost:8080/api
{
    "kind": "APIVersions",
    "verdions": [
        "v1"
    ],
    "serverAddressByClientCIDRs": [
        {
            "clientCIDR": "0.0.0.0/0",
            "serverAddress": "192.168.18.131:6443"
        }
    ]
}
```

可以运行下面命令查看Kubernetes API Server目前支持的资源对象的种类:

```
# curl localhost:8080/api/v1
```

根据以上命令的输出，我们可以运行下面的curl命令，分别返回集群中的Pod列表、Service列表、RC列表等：

```
# curl localhost:8080/api/v1/pods
# curl localhost:8080/api/v1/services
# curl localhost:8080/api/v1/replicationcontrollers
```

如果只想对外暴露部分REST服务, 则可以在Mater或其他节点上