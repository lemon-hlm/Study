
<!-- @import "[TOC]" {cmd="toc" depthFrom=1 depthTo=6 orderedList=false} -->

<!-- code_chunk_output -->



<!-- /code_chunk_output -->

在很多应用场景中，应用在启动之前都需要进行如下初始化操作。

◎　等待其他关联组件正确运行（例如数据库或某个后台服务）。

◎　基于环境变量或配置模板生成配置文件。

◎　从远程数据库获取本地所需配置，或者将自身注册到某个中央数据库中。

◎　下载相关依赖包，或者对系统进行一些预配置操作。

Kubernetes 1.3引入了一个Alpha版本的新特性init container（初始化容器，在Kubernetes 1.5时被更新为Beta版本），用于在启动应用容器（app container）之前启动一个或多个初始化容器，完成应用容器所需的预置条件，如图3.7所示。init container与应用容器在本质上是一样的，但它们是仅运行一次就结束的任务，并且必须在成功执行完成后，系统才能继续执行下一个容器。根据Pod的重启策略（RestartPolicy），当init container执行失败，而且设置了RestartPolicy=Never时，Pod将会启动失败；而设置RestartPolicy=Always时，Pod将会被系统自动重启。

图3.7 init container

![2019-08-26-22-11-32.png](./images/2019-08-26-22-11-32.png)