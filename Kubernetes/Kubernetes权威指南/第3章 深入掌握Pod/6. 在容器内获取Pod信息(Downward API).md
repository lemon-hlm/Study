
<!-- @import "[TOC]" {cmd="toc" depthFrom=1 depthTo=6 orderedList=false} -->

<!-- code_chunk_output -->

- [1 环境变量方式: 将Pod信息注入为环境变量](#1-环境变量方式-将pod信息注入为环境变量)

<!-- /code_chunk_output -->

**每个Pod**在被成功创建出来之后，都会被系统分配**唯一的名字**、**IP地址**，并且处于**某个Namespace**中，那么我们如何在**Pod的容器内**获取**Pod的这些重要信息**呢？答案就是使用**Downward API**。

Downward API可以通过以下**两种方式**将**Pod信息注入容器内部**。

（1）**环境变量**：用于**单个变量**，可以将**Pod信息**和**Container信息**注入容器内部。

（2）**Volume挂载**：将**数组类信息**生成为**文件**并**挂载到容器内部**。

下面通过几个例子对Downward API的用法进行说明。

# 1 环境变量方式: 将Pod信息注入为环境变量

下面的例子通过Downward API将Pod的IP、名称和所在Namespace注入容器的环境变量中，容器应用使用env命令将全部环境变量打印到标准输出中：

```yaml
apiVersion: v1
kind: Pod
metadata:
  name: dapi-test-pod
spec:
  containers:
  - name: test-container
  image: busybox
  command: [ "/bin/sh", "-c", "env" ]
  env:
    - name: MY_POD_NAME
      valueFrom:
        fieldRef:
          fieldPath: metadata.name
    - name: MY_POD_NAMESPACE
      valueFrom:
        fieldRef:
          fieldPath: metadata.namespace
    - name: MY_POD_IP
      valueFrom:
        fieldRef:
          fieldPath: status.podIP
  restartPolicy: Never
```

