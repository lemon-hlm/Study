
# 1 Pool

## 1.1 查看Pool

```
ceph osd lspools
```

## 1.2 创建Pool

```
ceph osd pool create images 32 32
ceph osd pool create volumes 32 32
ceph osd pool create backups 32 32
ceph osd pool create vms 32 32
```

```
ceph osd pool create images 2048 2048
ceph osd pool create volumes 2048 2048
ceph osd pool create backups 2048 2048
ceph osd pool create vms 2048 2048
```

# 2 用户

## 2.1 查看用户

```
ceph auth list
```

查看指定用户

```
ceph auth get client.admin
```

## 2.2 创建用户

创建用户并赋予权限

```
sudo ceph auth get-or-create client.glance
sudo ceph auth caps client.glance mon 'allow r' osd 'allow class-read object_prefix rbd_children, allow rwx pool=images'

sudo ceph auth get-or-create client.cinder-volume
sudo ceph auth caps client.cinder-volume mon 'allow r' osd 'allow class-read object_prefix rbd_children, allow rwx pool=volumes, allow rwx pool=vms, allow rx pool=images'

sudo ceph auth get-or-create client.cinder-backup
sudo ceph auth caps client.cinder-backup mon 'allow r' osd 'allow class-read object_prefix rbd_children, allow rwx pool=volumes, allow rwx pool=backups'

sudo ceph auth get-or-create client.nova
sudo ceph auth caps client.nova mon 'allow r' osd 'allow class-read object_prefix rbd_children, allow rwx pool=vms, allow rwx pool=volumes, allow rwx pool=images'
```

