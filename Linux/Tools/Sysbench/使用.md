
<!-- @import "[TOC]" {cmd="toc" depthFrom=1 depthTo=6 orderedList=false} -->

<!-- code_chunk_output -->

- [1 安装](#1-安装)
  - [1.1 二进制包安装](#11-二进制包安装)
  - [1.2 源码安装](#12-源码安装)
- [2 使用](#2-使用)

<!-- /code_chunk_output -->

# 1 安装

参照github README

## 1.1 二进制包安装

```
# curl -s https://packagecloud.io/install/repositories/akopytov/sysbench/script.rpm.sh | sudo bash
# sudo yum -y install sysbench
```

## 1.2 源码安装

安装依赖

```
yum -y install make automake libtool pkgconfig libaio-devel
# For MySQL support, replace with mysql-devel on RHEL/CentOS 5
yum -y install mariadb-devel openssl-devel
# For PostgreSQL support
yum -y install postgresql-devel
```

编译安装

```
./autogen.sh
# Add --with-pgsql to build with PostgreSQL support
./configure
make -j
make install
```

如果出现`perl: warning: Falling back to the standard locale ("C")`, 需要设置locale

```
echo "export LC_ALL=C" >> /root/.bashrc
source /root/.bashrc
```

要是没有安装开发包，即/usr/include/ 目录下面没有mysql文件夹。则需要执行安装:

```

```

# 2 使用

执行sysbench \–help，可以看到sysbench的详细使用方法。


```
sysbench [options]... [testname] [command] 
```

（1）command

command是sysbench要执行的命令，包括prepare、run、cleanup和help，顾名思义，

- prepare是为测试提前准备数据，
- run是执行正式的测试，
- cleanup是在测试完成后对数据库进行清理
- 

（2）testname

testname指定了要进行的测试，在老版本的sysbench中，可以通过\-\-test参数指定测试的脚本；而在新版本中，--test参数已经声明为废弃，可以不使用\-\-test，而是直接指定脚本。

