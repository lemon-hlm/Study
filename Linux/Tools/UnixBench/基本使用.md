
<!-- @import "[TOC]" {cmd="toc" depthFrom=1 depthTo=6 orderedList=false} -->

<!-- code_chunk_output -->

- [1 介绍](#1-介绍)
- [2 官网地址](#2-官网地址)
- [3 安装](#3-安装)
- [4 使用](#4-使用)
- [5 测试得分项说明](#5-测试得分项说明)

<!-- /code_chunk_output -->

# 1 介绍

UnixBench是一个类unix系（Unix，BSD，Linux）统下的性能测试工具，一个开源工具，被广泛用与测试linux系统主机的性能。

Unixbench的主要测试项目有：**系统调用**、**读写**、**进程**、**图形化测试**、**2D**、**3D**、**管道**、**运算**、**C库**等系统基准性能提供测试数据。

最新版本UnixBench5.1.3，包含**system**和**graphic**测试，如果你需要测试graphic，则需要修改Makefile, 不要注释掉”GRAPHIC\_TESTS = defined”，同时需要系统提供x11perf命令gl\_glibs库。

下面的脚本使用了最新版UnixBench5.1.3来测试，注释了关于graphic的测试项（大多数VPS都是没有显卡或者是集显，所以图像性能无需测试），运行10-30分钟后（根据CPU内核数量，运算时间不等）得出分数，**越高越好**。

# 2 官网地址

https://github.com/kdlucas/byte-unixbench

# 3 安装

下载

```
wget https://s3.amazonaws.com/cloudbench/software/UnixBench5.1.3.tgz
wget https://storage.googleapis.com/google-code-archive-downloads/v2/code.google.com/byte-unixbench/UnixBench5.1.3.tgz
```

解压, 编译

```
tar -xvf UnixBench5.1.3.tgz
cd UnixBench/
make all
```

如果你不需要测试图形性能的话，可以在编译之前把Makefile中的GRAPHIC_TESTS = defined注释掉

# 4 使用

```
[root@02master01 UnixBench]# ./Run
make all
make[1]: Entering directory `/root/unixbench/UnixBench'
Checking distribution of files
./pgms  exists
./src  exists
./testdir  exists
./tmp  exists
./results  exists
make[1]: Leaving directory `/root/unixbench/UnixBench'
sh: 3dinfo: command not found

   #    #  #    #  #  #    #          #####   ######  #    #   ####   #    #
   #    #  ##   #  #   #  #           #    #  #       ##   #  #    #  #    #
   #    #  # #  #  #    ##            #####   #####   # #  #  #       ######
   #    #  #  # #  #    ##            #    #  #       #  # #  #       #    #
   #    #  #   ##  #   #  #           #    #  #       #   ##  #    #  #    #
    ####   #    #  #  #    #          #####   ######  #    #   ####   #    #

   Version 5.1.3                      Based on the Byte Magazine Unix Benchmark

   Multi-CPU version                  Version 5 revisions by Ian Smith,
                                      Sunnyvale, CA, USA
   January 13, 2011                   johantheghost at yahoo period com


1 x Dhrystone 2 using register variables  1 2 3 4 5 6 7 8 9 10

1 x Double-Precision Whetstone  1 2 3 4 5 6 7 8 9 10

1 x Execl Throughput  1 2 3

1 x File Copy 1024 bufsize 2000 maxblocks  1
```

注: 执行`Run`就会自动编译, 所以其实也不需要先`make all`

执行命令./Run即可。脚本会先进行编译，然后再执行测试

如果就执行`Run`就是做一个**系统测试**，如果执行`Run graphics`就是执行**图形测试**，执行`Run gindex`就是**两个测试都执行**，测试时间是相当漫长的。

# 5 测试得分项说明

Dhrystone 2 using register variables

此项用于测试 **string handling**，因为没有浮点操作，所以深受软件和硬件设计（hardware and software design）、编译和链接（compiler and linker options）、代码优化（code optimazaton）、对内存的cache（cache memory）、等待状态（wait states）、整数数据类型（integer data types）的影响。

Double\-Precision Whetstone

这一项测试**浮点数操作**的速度和效率。这一测试包括几个模块，每个模块都包括一组用于科学计算的操作。覆盖面很广的一系列 c 函数：sin，cos，sqrt，exp，log 被用于整数和浮点数的数学运算、数组访问、条件分支（conditional branch）和程序调用。此测试同时测试了整数和浮点数算术运算。

