[TOC]

https://segmentfault.com/a/1190000009249039

# 1 虚拟设备和物理设备的区别

在\<Linux网络数据包的接收过程\>和\<数据包的发送过程\>这两篇文章中，介绍了数据包的收发流程，知道了**Linux内核**中有一个**网络设备管理层(管理所有网络设备！！！**)，处于**网络设备驱动(！！！**)和**协议栈(！！！**)之间，负责**衔接**它们之间的**数据交互！！！**。

**驱动不需要了解协议栈**的细节，**协议栈也不需要了解设备驱动**的细节。

对于一个网络设备来说，就像一个管道（pipe）一样，有两端，从其中任意一端收到的数据将从另一端发送出去。

比如一个**物理网卡eth0**，它的两端分别是**内核协议栈（通过内核网络设备管理模块间接的通信**）和**外面的物理网络**，从**物理网络**收到的**数据**，会转发给**内核协议栈**，而**应用程序**从**协议栈**发过来的数据将会**通过物理网络发送**出去。

那么对于一个**虚拟网络设备**呢？首先它也**归内核的网络设备管理子系统管理**，对于Linux内核网络设备管理模块来说，虚拟设备和物理设备没有区别，都是网络设备，都能配置IP，从网络设备来的数据，都会转发给协议栈，协议栈过来的数据，也会交由网络设备发送出去，至于是**怎么发送出去**的，**发到哪里去**，那是**设备驱动的事情！！！**，跟Linux内核就没关系了，所以说虚拟网络设备的一端也是协议栈，而另一端是什么取决于虚拟网络设备的驱动实现。


